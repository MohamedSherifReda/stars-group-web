import{z as P,r as u,o as e,L as b}from"./chunk-PVWAREVJ-BQ_Ke5P5.js";import{u as x,I as f}from"./input-B43vsxgu.js";import{B as m,z as r}from"./button-CM93bdqt.js";import{a as w}from"./auth.apis-1D8ItQDb.js";import{C as N,a as y,b as v,c as C,d as S}from"./card-BRZbrZQm.js";import"./cn-tC5vkuG_.js";import"./index-CRxIWVFI.js";function F(){return[{title:"Stars Group CMS - Forget Password"}]}const I=F,L=P(function(){const[n,i]=u.useState("request"),[o,p]=u.useState(""),[d,h]=u.useState(""),l=x({mutationFn:s=>w.forgetPassword(s),onSuccess:()=>{i("reset"),r.success("Reset code sent to your email/phone")},onError:s=>{var t,a;r.error(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to send reset code")}}),c=x({mutationFn:({identifier:s,password:t})=>w.completeForgetPassword(s,t),onSuccess:()=>{r.success("Password reset successfully"),i("request"),p(""),h("")},onError:s=>{var t,a;r.error(((a=(t=s.response)==null?void 0:t.data)==null?void 0:a.message)||"Failed to reset password")}}),g=s=>{if(s.preventDefault(),!o){r.error("Please enter your email or phone number");return}l.mutate(o)},j=s=>{if(s.preventDefault(),!d){r.error("Please enter your new password");return}c.mutate({identifier:o,password:d})};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs(N,{className:"w-full max-w-md",children:[e.jsxs(y,{className:"space-y-1",children:[e.jsx(v,{className:"text-2xl text-center",children:n==="request"?"Forgot Password":"Reset Password"}),e.jsx(C,{className:"text-center",children:n==="request"?"Enter your email or phone number to receive a reset code":"Enter your new password"})]}),e.jsxs(S,{children:[n==="request"?e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"identifier",className:"text-sm font-medium",children:"Email or Phone Number"}),e.jsx(f,{id:"identifier",type:"text",placeholder:"Enter email or phone number",value:o,onChange:s=>p(s.target.value),required:!0})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:l.isPending,children:l.isPending?"Sending...":"Send Reset Code"})]}):e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"New Password"}),e.jsx(f,{id:"password",type:"password",placeholder:"Enter new password",value:d,onChange:s=>h(s.target.value),required:!0})]}),e.jsx(m,{type:"submit",className:"w-full",disabled:c.isPending,children:c.isPending?"Resetting...":"Reset Password"}),e.jsx(m,{type:"button",variant:"outline",className:"w-full",onClick:()=>i("request"),children:"Back"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(b,{to:"/auth/login",className:"text-sm text-blue-600 hover:underline",children:"Back to Login"})})]})]})})});export{L as default,I as meta};
