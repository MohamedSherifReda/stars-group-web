import{z as f,r as h,o as e,v as x,L as g}from"./chunk-PVWAREVJ-BQ_Ke5P5.js";import{u as j,I as l}from"./input-B43vsxgu.js";import{B as w,z as n}from"./button-CM93bdqt.js";import{a as N}from"./auth.apis-1D8ItQDb.js";import{u as b}from"./auth-Dire9w22.js";import{C as v,a as y,b as C,c as L,d as S,e as _}from"./card-BRZbrZQm.js";import"./cn-tC5vkuG_.js";import"./index-CRxIWVFI.js";function A(){return[{title:"Stars Group CMS - Login"}]}const R=A,G=f(function(){const[a,c]=h.useState({identifier:"",password:""}),{isAuthenticated:m,setAuth:u}=b(),r=j({mutationFn:({identifier:s,password:t})=>N.login(s,t),onSuccess:async s=>{const{access_token:t,desquare_token:i,complete_phone_number_required:F}=s.data.data,d=await _.get("/users/profile?relations[profile_image]=true",{headers:{Authorization:`Bearer ${t}`}});console.log("user profile response",d.data),u(d.data,t),n.success("Login successful")},onError:s=>{var t,i;n.error(((i=(t=s.response)==null?void 0:t.data)==null?void 0:i.message)||"Login failed")}});if(m)return e.jsx(x,{to:"/dashboard",replace:!0});const p=s=>{if(s.preventDefault(),!a.identifier||!a.password){n.error("Please fill in all fields");return}r.mutate(a)},o=s=>{c(t=>({...t,[s.target.name]:s.target.value}))};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs(v,{className:"w-full max-w-md",children:[e.jsxs(y,{className:"space-y-1",children:[e.jsx(C,{className:"text-2xl text-center",children:"Login"}),e.jsx(L,{className:"text-center",children:"Enter your credentials to access the admin panel"})]}),e.jsxs(S,{children:[e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"identifier",className:"text-sm font-medium",children:"Identifier"}),e.jsx(l,{id:"identifier",name:"identifier",type:"text",placeholder:"admin@example.com",value:a.identifier,onChange:o,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(l,{id:"password",name:"password",type:"password",placeholder:"Enter your password",value:a.password,onChange:o,required:!0})]}),e.jsx(w,{type:"submit",className:"w-full",disabled:r.isPending,children:r.isPending?"Signing in...":"Login"})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx(g,{to:"/auth/forgot-password",className:"text-sm text-blue-600 hover:underline",children:"Forgot your password?"})})]})]})})});export{G as default,R as meta};
