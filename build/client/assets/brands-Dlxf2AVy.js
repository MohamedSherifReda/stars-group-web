import{z as K,r as h,o as e}from"./chunk-PVWAREVJ-BQ_Ke5P5.js";import{b as x}from"./brand.apis-NN4L91Fm.js";import{m as O}from"./media.apis-CowVtZYo.js";import{u as G}from"./useQuery-DHF6e7RT.js";import{u as V}from"./cn-tC5vkuG_.js";import{u as g,I as l}from"./input-B43vsxgu.js";import{B as d,z as o}from"./button-CM93bdqt.js";import{C as J,a as W,b as X,c as Y,d as Z}from"./card-BRZbrZQm.js";import{D,a as $,P as ee,b as T,c as P,d as q,e as L,L as r,f as A,T as se,S as ae}from"./label-Cq4Oo9qY.js";import{T as ie,a as re,b as R,c as u,d as te,e as m}from"./table-BHwQUpxa.js";import{T as E}from"./textarea-D8iJ83mD.js";import{I as ne}from"./image-Bw9s3xfc.js";import"./query-CCu8L-_k.js";import"./index-CRxIWVFI.js";import"./createLucideIcon-TdObXFoJ.js";import"./index-BfqRPb-g.js";import"./index-DJJvMmdf.js";function le(){return[{title:"Stars Group CMS - Brands"}]}const Be=le,we=K(function(){const[M,j]=h.useState(!1),[_,p]=h.useState(null),[i,t]=h.useState({name:"",heading_title:"",description:"",shop_url:"",gradient_hex:"#000000"}),[b,y]=h.useState(null),[F,v]=h.useState(null),f=V(),{data:I=[],isLoading:U}=G({queryKey:["brands"],queryFn:()=>x.getBrands({"relations[logo]":"true","relations[product_picture]":"true","relations[banners]":"true"}).then(s=>s.data)}),B=g({mutationFn:s=>O.upload(s)}),N=g({mutationFn:s=>x.createBrand(s),onSuccess:()=>{f.invalidateQueries({queryKey:["brands"]}),j(!1),c(),o.success("Brand created successfully")},onError:s=>{var a,n;o.error(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to create brand")}}),C=g({mutationFn:({id:s,brand:a})=>x.updateBrand(s,a),onSuccess:()=>{f.invalidateQueries({queryKey:["brands"]}),p(null),c(),o.success("Brand updated successfully")},onError:s=>{var a,n;o.error(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to update brand")}}),H=g({mutationFn:s=>x.deleteBrand(s),onSuccess:()=>{f.invalidateQueries({queryKey:["brands"]}),o.success("Brand deleted successfully")},onError:s=>{var a,n;o.error(((n=(a=s.response)==null?void 0:a.data)==null?void 0:n.message)||"Failed to delete brand")}}),c=()=>{t({name:"",heading_title:"",description:"",shop_url:"",gradient_hex:"#000000"}),y(null),v(null)},w=async s=>{s.preventDefault();try{let a,n;b&&(a=(await B.mutateAsync(b)).data.id),F&&(n=(await B.mutateAsync(F)).data.id);const S={...i,...a&&{logo_id:a},...n&&{product_picture_id:n},brand_id_brand_translations:[{description:i.description,name:i.name,heading_title:i.heading_title,language:"en"}]};_?C.mutate({id:_.id,brand:S}):N.mutate(S)}catch{o.error("Failed to upload files")}},k=s=>{c(),p(s),t({name:s.name,heading_title:s.heading_title,description:s.description,shop_url:s.shop_url||"",gradient_hex:s.gradient_hex})},z=s=>{window.confirm("Are you sure you want to delete this brand?")&&H.mutate(s)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Brands"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Manage brand partners and their information."})]}),e.jsxs(D,{open:M,onOpenChange:()=>{c(),j(s=>!s)},children:[e.jsx($,{asChild:!0,children:e.jsxs(d,{children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Add Brand"]})}),e.jsxs(T,{className:"max-w-2xl",children:[e.jsxs(P,{children:[e.jsx(q,{children:"Create New Brand"}),e.jsx(L,{children:"Add a new brand partner to the system."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"name",children:"Brand Name"}),e.jsx(l,{id:"name",value:i.name,onChange:s=>t(a=>({...a,name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"heading_title",children:"Heading Title"}),e.jsx(l,{id:"heading_title",value:i.heading_title,onChange:s=>t(a=>({...a,heading_title:s.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"description",children:"Description"}),e.jsx(E,{id:"description",value:i.description,onChange:s=>t(a=>({...a,description:s.target.value})),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"shop_url",children:"Shop URL"}),e.jsx(l,{id:"shop_url",type:"url",value:i.shop_url,onChange:s=>t(a=>({...a,shop_url:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"gradient_hex",children:"Gradient Color"}),e.jsx(l,{id:"gradient_hex",type:"color",value:i.gradient_hex,onChange:s=>t(a=>({...a,gradient_hex:s.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"logo",children:"Logo"}),e.jsx(l,{id:"logo",type:"file",accept:"image/*",onChange:s=>{var a;return y(((a=s.target.files)==null?void 0:a[0])||null)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"product_picture",children:"Product Picture"}),e.jsx(l,{id:"product_picture",type:"file",accept:"image/*",onChange:s=>{var a;return v(((a=s.target.files)==null?void 0:a[0])||null)}})]})]}),e.jsxs(A,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>j(!1),children:"Cancel"}),e.jsx(d,{type:"submit",disabled:N.isPending,children:N.isPending?"Creating...":"Create Brand"})]})]})]})]})]}),e.jsxs(J,{children:[e.jsxs(W,{children:[e.jsx(X,{children:"All Brands"}),e.jsx(Y,{children:"A list of all brand partners in the system."})]}),e.jsx(Z,{children:U?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"text-gray-500",children:"Loading brands..."})}):e.jsxs(ie,{children:[e.jsx(re,{children:e.jsxs(R,{children:[e.jsx(u,{children:"Logo"}),e.jsx(u,{children:"Name"}),e.jsx(u,{children:"Description"}),e.jsx(u,{children:"Shop URL"}),e.jsx(u,{children:"Actions"})]})}),e.jsx(te,{children:I.map(s=>{var a;return e.jsxs(R,{children:[e.jsx(m,{children:(a=s.logo)!=null&&a.url?e.jsx("img",{src:s.logo.url,alt:s.name,className:"w-10 h-10 object-cover rounded"}):e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center",children:e.jsx(ne,{className:"w-4 h-4 text-gray-400"})})}),e.jsx(m,{className:"font-medium",children:s.name}),e.jsx(m,{className:"max-w-xs truncate",children:s.description}),e.jsx(m,{children:s.shop_url?e.jsx("a",{href:s.shop_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Visit Shop"}):e.jsx("span",{className:"text-gray-400",children:"No URL"})}),e.jsx(m,{children:e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{variant:"outline",size:"sm",onClick:()=>z(s.id),children:e.jsx(se,{className:"w-4 h-4"})}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>k(s),children:e.jsx(ae,{className:"w-4 h-4"})})]})})]},s.id)})})]})})]}),e.jsx(D,{open:!!_,onOpenChange:()=>p(null),children:e.jsxs(T,{className:"max-w-2xl",children:[e.jsxs(P,{children:[e.jsx(q,{children:"Edit Brand"}),e.jsx(L,{children:"Update brand information."})]}),e.jsxs("form",{onSubmit:w,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_name",children:"Brand Name"}),e.jsx(l,{id:"edit_name",value:i.name,onChange:s=>t(a=>({...a,name:s.target.value})),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_heading_title",children:"Heading Title"}),e.jsx(l,{id:"edit_heading_title",value:i.heading_title,onChange:s=>t(a=>({...a,heading_title:s.target.value})),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_description",children:"Description"}),e.jsx(E,{id:"edit_description",value:i.description,onChange:s=>t(a=>({...a,description:s.target.value})),required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_shop_url",children:"Shop URL"}),e.jsx(l,{id:"edit_shop_url",type:"url",value:i.shop_url,onChange:s=>t(a=>({...a,shop_url:s.target.value}))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_gradient_hex",children:"Gradient Color"}),e.jsx(l,{id:"edit_gradient_hex",type:"color",value:i.gradient_hex,onChange:s=>t(a=>({...a,gradient_hex:s.target.value}))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_logo",children:"Logo (optional)"}),e.jsx(l,{id:"edit_logo",type:"file",accept:"image/*",onChange:s=>{var a;return y(((a=s.target.files)==null?void 0:a[0])||null)}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(r,{htmlFor:"edit_product_picture",children:"Product Picture (optional)"}),e.jsx(l,{id:"edit_product_picture",type:"file",accept:"image/*",onChange:s=>{var a;return v(((a=s.target.files)==null?void 0:a[0])||null)}})]})]}),e.jsxs(A,{children:[e.jsx(d,{type:"button",variant:"outline",onClick:()=>{p(null),c()},children:"Cancel"}),e.jsx(d,{type:"submit",disabled:C.isPending,children:C.isPending?"Updating...":"Update Brand"})]})]})]})})]})});export{we as default,Be as meta};
