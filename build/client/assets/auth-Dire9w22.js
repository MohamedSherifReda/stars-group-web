import{R as a}from"./chunk-PVWAREVJ-BQ_Ke5P5.js";const i=t=>{let e;const s=new Set,n=(o,l)=>{const u=typeof o=="function"?o(e):o;if(!Object.is(u,e)){const b=e;e=l??(typeof u!="object"||u===null)?u:Object.assign({},e,u),s.forEach(h=>h(e,b))}},c=()=>e,r={setState:n,getState:c,getInitialState:()=>g,subscribe:o=>(s.add(o),()=>s.delete(o))},g=e=t(n,c,r);return r},d=t=>t?i(t):i,f=t=>t;function m(t,e=f){const s=a.useSyncExternalStore(t.subscribe,a.useCallback(()=>e(t.getState()),[t,e]),a.useCallback(()=>e(t.getInitialState()),[t,e]));return a.useDebugValue(s),s}const S=t=>{const e=d(t),s=n=>m(e,n);return Object.assign(s,e),s},I=t=>t?S(t):S,O=I(t=>({user:null,token:null,isAuthenticated:!1,setAuth:(e,s)=>{localStorage.setItem("auth_token",s),localStorage.setItem("user",JSON.stringify(e)),t({user:e,token:s,isAuthenticated:!0})},logout:()=>{localStorage.removeItem("auth_token"),localStorage.removeItem("user"),t({user:null,token:null,isAuthenticated:!1})},initializeAuth:()=>{const e=localStorage.getItem("auth_token"),s=localStorage.getItem("user");if(e&&s)try{const n=JSON.parse(s);t({user:n,token:e,isAuthenticated:!0})}catch(n){console.error("Failed to parse stored user:",n),t({user:null,token:null,isAuthenticated:!1})}}}));export{I as c,O as u};
